var f=(e,t,o)=>new Promise((s,r)=>{var n=l=>{try{c(o.next(l))}catch(d){r(d)}},i=l=>{try{c(o.throw(l))}catch(d){r(d)}},c=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,i);c((o=o.apply(e,t)).next())});import{c as I,a as p,b,d as w,_ as O,e as v,f as S,r as y,o as D,s as L,g as E,F as A,h as N,i as P,B as R,j as U,m as B}from"./vendor.f448bbba.js";const C=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};C();let u=()=>Object.fromEntries(document.cookie.split("; ").map(e=>e.split("=")).map(e=>[e[0],decodeURIComponent(e[1])]));const m=I({state:{auth:{loading:!1,user_id:u().user_id},user:{fullName:u().full_name,imageURL:u().user_image},uploads:[],sortOrder:JSON.parse(localStorage.getItem("sortOrder"))||{label:"Modified",field:"modified",ascending:!1},view:JSON.parse(localStorage.getItem("view"))||"grid",entityInfo:null,pasteData:{entities:[],action:null},showInfo:!1,hasWriteAccess:!1,currentFolderID:"",homeFolderID:"",currentBreadcrumbs:JSON.parse(localStorage.getItem("currentBreadcrumbs"))||[{label:"",route:""}]},getters:{isLoggedIn:e=>e.auth.user_id&&e.auth.user_id!=="Guest",uploadsInProgress:e=>e.uploads.filter(t=>!t.completed),uploadsCompleted:e=>e.uploads.filter(t=>t.completed)},mutations:{setAuth(e,t){Object.assign(e.auth,t)},setUser(e,t){Object.assign(e.user,t)},setUploads(e,t){e.uploads=t},pushToUploads(e,t){e.uploads.push(t)},updateUpload(e,t){let o=e.uploads.findIndex(s=>s.uuid==t.uuid);Object.assign(e.uploads[o],t)},setSortOrder(e,t){localStorage.setItem("sortOrder",JSON.stringify(t)),e.sortOrder=t},toggleView(e,t){localStorage.setItem("view",JSON.stringify(t)),e.view=t},setEntityInfo(e,t){e.entityInfo=t},setPasteData(e,t){e.pasteData=t},setShowInfo(e,t){e.showInfo=t},setHasWriteAccess(e,t){e.hasWriteAccess=t},setCurrentFolderID(e,t){e.currentFolderID=t},setHomeFolderID(e,t){e.homeFolderID=t},setCurrentBreadcrumbs(e,t){localStorage.setItem("currentBreadcrumbs",JSON.stringify(t)),e.currentBreadcrumbs=t}},actions:{login(o,s){return f(this,arguments,function*({commit:e},t){e("setAuth",{loading:!0});let r=yield p("login",{usr:t.email,pwd:t.password});return console.log("RES",r,u()),r?(e("setAuth",{loading:!1,user_id:u().user_id}),e("setUser",{fullName:u().full_name,imageURL:u().user_image?window.location.origin+u().user_image:null}),r):!1})},logout(t){return f(this,arguments,function*({commit:e}){e("setAuth",{loading:!0}),yield p("logout"),window.location.reload()})},clearUploads({commit:e}){e("setUploads",[])}}}),F="modulepreload",g={},j="/assets/todo/frontend/",h=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${j}${s}`,s in g)return;g[s]=!0;const r=s.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":F,r||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),r)return new Promise((c,l)=>{i.addEventListener("load",c),i.addEventListener("error",l)})})).then(()=>t())},k=[{path:"/",name:"Home",component:()=>h(()=>import("./Home.1fd562cd.js"),["assets/Home.1fd562cd.js","assets/vendor.f448bbba.js","assets/vendor.1f7d581e.css"])},{path:"/demo",name:"Demo",component:()=>h(()=>import("./Demo.efee10d4.js"),["assets/Demo.efee10d4.js","assets/vendor.f448bbba.js","assets/vendor.1f7d581e.css"])}];let _=b({history:w("/todo"),routes:k});_.beforeEach((e,t,o)=>{e.matched.some(s=>s.meta.isPublicRoute)?m.getters.isLoggedIn?o({name:"Home"}):o():m.getters.isLoggedIn||e.matched.some(s=>s.meta.isHybridRoute)?o():window.location.href="/login"});const H={};function J(e,t){const o=y("router-view");return D(),v("div",null,[S(o)])}var W=O(H,[["render",J]]);L("resourceFetcher",U);const V=B(),a=E(W);a.config.unwrapInjectedRef=!0;a.config.globalProperties.emitter=V;a.use(_);a.use(m);a.use(A);a.use(N);a.directive("on-outside-click",P);a.directive("focus",{mounted:e=>e.focus()});a.component("Button",R);a.mount("#app");
